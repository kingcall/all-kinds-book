
[toc]
## 元数据管理

- 元数据通常定义为"关于数据的数据",在数据仓库中是定义和描述DW/BI系统的结构，操作和内容的所有信息。元数据贯穿了数据仓库的整个生命周期，使用元数据驱动数据仓库的开发，**使数据仓库自动化，可视化**，管理这些附加MetaData信息的目的，一方面是为了让用户能够更高效的挖掘和使用数据，另一方面是为了让平台管理人员能更加有效的做好系统的维护管理工作。
- 元数据可以帮助数据平台解决"有哪些数据"、"数据存储有多少"、"数据流中的血缘关系"、"如何找到我需要的数据"、"如何使用数据"和"数据的生产进度"，并对上游线上业务库的同步进度和元信息变更进行监控，及时进行影响分析及预警。
- 到最后是否可以达到**数据推荐的效果**
- 元数据管理系统**为大数据平台绘制数据地图、统一数据口径、标明数据方位、分析数据关系、管理模型变更及精确到字段级别的影响分析**。**打通上下游数据继承关系断层，为数据质量维护和业务逻辑可视化打下坚实基础**。

### 元数据定义
- 元数据MetaData狭义的解释是用来描述数据的数据，广义的来看，除了业务逻辑直接读写处理的那些业务数据，所有其它用来维持整个系统运转所需的信息／数据都可以叫作元数据。比如数据表格的Schema信息，任务的血缘关系，用户和脚本／任务的权限映射关系信息等等


### 技术元数据
#### 物理元数据
- 描述物理资源的元数据，包括但不限于服务器、操作系统、机房位置等信息

#### 数据源元数据
- 描述数据源的元数据，通常包括四类信息：数据源地址（IP、PORT等）物理拓扑（主备、角色等）权限（用户名、口令等）库名、版本、域名等

#### 存储元数据
- **描述对象存储的元数据，也是通常"狭义"上的元数据**，包括几大类管理属性(创建人、应用系统、业务线、业务负责人等）
- 生命周期（创建时间、DDL时间、版本信息等）
- 存储属性（位置、物理大小等）
- 数据特征（数据倾斜、平均长度等）
- 使用特征（DML、刷新率等）
- 数据结构表
    - 分区（名称、类型、备注等）
    - 列（名称、类型、长度、精度等）
    - 索引（名称、类型、字段等）
    - 约束（类型、字段等）

#### 计算元数据
- 描述数据计算过程的元数据，通常可分为数据抽取（ETL）或数据加工（JOB）两类计算。
- 每类计算又可以进一步细分控制元数据（配置属性、调度策略等）
- 过程元数据（依赖关系、执行状态、执行日志等）

#### 质量元数据
- 描述数据质量的一类元数据。通常情况下，是**通过定义一系列质量指标反映数据质量**。

#### 操作元数据
- 描述数据是如何进行使用的一类元数据。
    -  数据产生（产生时间、作业信息等）
    -  表访问（查询、关联、聚合等）
    -  表关联（关联表、关联字段、关联类型、关联次数）
    -  字段访问（查询、关联、聚合、过滤等）

#### 运维元数据
- **描述系统运维层面的元数据**，通常包括任务类、报警类及故障类

#### 成本元数据
- 描述数据存储及计算成本的元数据。计算成本（CPU、MEM等）存储成本（空间、压缩率等）

#### 标准元数据
- 描述数据标准化内容的元数据。
    - 代码管理（转换规则、对外接口等）
    - 映射管理数据展示（样式、规则、语义、单位等）

#### 安全元数据
- 描述数据安全内容的元数据。安全等级数据敏感性（是否敏感、脱敏算法等）

#### 共享元数据
- 描述数据是如何共享的部分，包括接口方式、格式、内容等。

### 业务元数据

#### 模型元数据
- 数据建模，是一种对业务的描述，通过模型可更好地了解业务。常见的建模方式有范式模型、维度模型、多维建模等。下面以维度模型为例进行说明。
    - 业务线
    - 板块
    - 过程数据域
    - 主题域维度
    - 属性指标事实
    - 度量集市与应用

#### 应用元数据
- 描述数据应用类的元数据。

#### 分析元数据
- 从数据分析角度，描述业务的元数据。数据域、主题域产品线、板块、业务过程业务流程业务规则

## 元数据管理平台
- 数据治理的第一步，就是收集信息，很明显，没有数据就无从分析，也就无法有效的对平台的数据链路进行管理和改进。所以元数据管理平台很重要的一个功能就是信息的收集，至于收集哪些信息，取决于业务的需求和我们需要解决的目标问题。
- 信息收集再多，如果不能发挥作用，那也就只是浪费存储空间而已。所以元数据管理平台还需要考虑如何以恰当的形式对这些元数据信息进行展示，进一步的，如何将这些元数据信息通过服务的形式提供给周边上下游系统使用，真正帮助大数据平台完成质量管理的闭环工作。

### 元数据收集
- 常这些元数据信息是散落在平台的各个系统，各种流程之中的，而它们的管理也可能或多或少可以通过各种子系统自身的工具，方案或流程逻辑来实现。那么我们所说的元数据管理平台又是用来做什么的？是不是所有的信息都应该或者有必要收集到一个系统中来进行统一管理呢，具体又有哪些数据应该被纳入到元数据管理平台的管理范围之中呢

#### 收集那些信息
- 数据的表结构Schema信息

##### 数据的空间存储，读写记录，权限归属和其它各类统计信息
- 这类信息，可能包括但不限于：数据占据了多少底层存储空间，最近是否有过修改，都有谁在什么时候使用过这些数据，谁有权限管理和查阅这些数据等等。此外，还可以包括类似昨天新增了多少个表格，删除了多少表格，创建了多少分区之类的统计信息。
- 在正常的工作流程中，多数人可能不需要也不会去关心这类信息。但是落到数据质量管理这个话题上时，这些信息对于系统和业务的优化，数据的安全管控，问题的排查等工作来说，又往往都是不可或缺的重要信息，所以通常这类信息也可以从Audit审计的角度来归类看待- 与表结构信息类似，对于这类Audit审计类信息的采集和管理，通常具体的底层数据存储管理组件自身的功能也无法直接满足我们的需求，需要通过专门的元数据管理平台中统一进行采集，加工和管理。


##### 数据的血缘关系信息
- 血缘信息或者叫做Lineage的血统信息是什么，简单的说就是数据之间的上下游来源去向关系，数据从哪里来到哪里去。
- 如果一个数据有问题，你可以根据血缘关系往上游排查，看看到底在哪个环节出了问题。此外我们也可以通过数据的血缘关系，建立起生产这些数据的任务之间的依赖关系，进而辅助调度系统的工作调度，或者用来判断一个失败或错误的任务可能对哪些下游数据造成影响等等。

##### 数据的业务属性信息
- 前面三类信息，一定程度上都可以通过技术手段从底层系统自身所拥有的信息中获取得到，又或着可以通过一定的流程二次加工分析得到。与之相反，数据的业务属性信息，通常与底层系统自身的运行逻辑无关，多半就需要通过其他手段从外部获取了
- 那么，业务属性信息都有哪些呢？最常见的，比如，一张数据表的统计口径信息，这张表干什么用的，各个字段的具体统计方式，业务描述，业务标签，脚本逻辑的历史变迁记录，变迁原因等等，此外，你也可能会关心对应的数据表格是由谁负责开发的，具体数据的业务部门归属等等。
- **上述信息如果全部需要依靠数据开发者的自觉填写，不是不行，但是显然不太靠谱**。毕竟对于多数同学来说，对于完成数据开发工作核心链路以外的工作量，很自然的反应就是能不做就不做，越省事越好。如果没有流程体系的规范，如果没有产生实际的价值，那么相关信息的填写很容易就会成为一个负担或者是流于形式。
- 尽管这部分信息往往需要通过外部手段人工录入，但是还是需要尽量考虑和流程进行整合，让它们成为业务开发必不可少的环节。比如，一部分信息的采集，可以通过整体数据平台的开发流程规范，嵌入到对应数据的开发过程中进行，例如历史变迁记录可以在修改任务脚本或者表格schema时强制要求填写；业务负责人信息，可以通过当前开发人员的业务线和开发群组归属关系自动进行映射填充；字段统计方式信息，尽可能通过标准的维度指标管理体系进行规范定义。


## 平台
![image-20201205190642552](https://kingcall.oss-cn-hangzhou.aliyuncs.com/blog/img/2020/12/05/19:06:43-image-20201205190642552.png)

